## 원칙과 패턴

<a href="./관계설정 책임의 분리.md">관계설정과 책임의 분리</a> 편에서 이어지는 것으로

해당 관심사가 분리된 코드들을 기반으로 사용된 원칙 등을 설명한다.

### 개방 폐쇄 원칙 (Open-Closed Principle)

한마디로 요약하자면 확장에 대해서는 열려있어야 하고, 변경에 있어서는 닫혀있어야 한다는 것이다.

위의 코드에서 `UserDao`를 기준으로 보자면, DB에 연결하기 위해 어떤 구체 클래스를 사용하는지에 대해서는 확장되어 있다.

여기서 말하는 확장은, 상속에 의한 확장도 되지만 인터페이스와 다형성을 활용한 확장도 상관없다.

또한 `UserDao`가 `원래 가져야할 책임에 대해서는 확장에 의한 변경이 일어나지 않는다.`

그 이유는 인터페이스를 통해 런타임에 결정된 오브젝트를 사용하기 때문이다.

### 높은 응집도와 낮은 결합도

응집도 자체의 의미는 `클래스 혹은 모듈내에 책임들이 같은 목표를 갖는지에 관한 정도`를 의미한다.

따라서 높은 응집도라는 것은 `변경이 발생할 때 마다 변하는 부분이 크다는 것을 의미`한다.

만약 기존의 `UserDao` 가 `ConnectionMaker`로 관심사가 분리되어있는것이 아니라 한곳에 모든 관심사가 집중되어 있다고 가정해보자.

```java
public class UserDao {

    public void add() {

        
    }

    public void get() {
        
    }

    Connection getConnection() {
        // 커넥션 객체 가져오기~
    }
}
```

위 클래스의 책임은 현재 User 정보를 DB에 적재하거나 조회하는 책임 외에 커넥션 객체를 얻는 책임또한 갖고 있다.

여기서 `커넥션 객체를 얻어오는 방식의 변경 혹은 확장`이 발생한다면, `UserDao` 전체가 아닌 `getConnection` 메소드에만 변경의 영향을 미친다.

이러한 클래스를 `낮은 응집도`의 클래스라고 볼 수 있으며

`ConnectionMaker` 인터페이스를 통해 DB 연결기능을 독립화 시킨 방식에서는 `새로운 확장이나 변경에 대해서 새로운 구체클래스만 만들면 된다.`

혹은 DB 연결로직 변경이 발생하더라도 UserDao의 일부가 아닌 `ConnectionMaker 구체 클래스의 대부분의 메서드에 영향`을 미치게 된다.

---

결합도 자체는 `서로 관계에 놓인 오브젝트 중 어떤 오브젝트의 변경이 반대쪽 오브젝트에 미치는 정도`를 의미한다.

따라서 낮은 결합도라는 것은 `서로 관심사가 다른 오브젝트 끼리 느슨한 연결형태를 유지하는 것`을 의미한다.

이말은 즉, 서로의 연결된 오브젝트 끼리 서로의 구체 클래스가 누구인지 알 필요가 없다는 것이 된다.

